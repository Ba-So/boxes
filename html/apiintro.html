
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Using the Boxes.py library &#8212; boxes.py 0.1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The boxes.Boxes main class" href="Boxes.html" />
    <link rel="prev" title="Contributing to Boxes.py" href="CONTRIBUTING.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Boxes.html" title="The boxes.Boxes main class"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="CONTRIBUTING.html" title="Contributing to Boxes.py"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">boxes.py 0.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="using-the-boxes-py-library">
<h1>Using the Boxes.py library<a class="headerlink" href="#using-the-boxes-py-library" title="Permalink to this headline">¶</a></h1>
<p>If there is no generator fitting your needs you can either adjust an
existing one (may be by copying it to another name first) or writing a
new one from scratch.</p>
<p>Generators are found in <code class="docutils literal notranslate"><span class="pre">boxes/generators/</span></code>. They are included into
the web UI and the CLI tool by the name of their class. So whenever
you copy either an existing generator or the sceleton in
<code class="docutils literal notranslate"><span class="pre">boxes/generators/_template.py</span></code> you need to change the name of the
main class first.</p>
<div class="section" id="generator-arguments">
<h2>Generator Arguments<a class="headerlink" href="#generator-arguments" title="Permalink to this headline">¶</a></h2>
<p>Boxes.py uses the <code class="docutils literal notranslate"><span class="pre">argparse</span></code> standard library for handling the
arguments for the generators. It is used directly for the <code class="docutils literal notranslate"><span class="pre">boxes</span></code>
command line tool. But it also handles – with some additional code –
the web interface and the Inkscape extensions. To make this work one
has to limit the kind of parameters used. Boxes.py supports the
following types:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">int</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">float</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">str</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">boxes.boolarg</span></code> – an alternative to <code class="docutils literal notranslate"><span class="pre">bool</span></code> that works with the
web interface</li>
<li><code class="docutils literal notranslate"><span class="pre">boxes.argparseSections</span></code> – multiple lengths e.g. for dividing up
a box in one direction</li>
</ul>
</div></blockquote>
<p>and</p>
<dl class="class">
<dt id="boxes.ArgparseEdgeType">
<em class="property">class </em><code class="descclassname">boxes.</code><code class="descname">ArgparseEdgeType</code><span class="sig-paren">(</span><em>edges=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/boxes.html#ArgparseEdgeType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#boxes.ArgparseEdgeType" title="Permalink to this definition">¶</a></dt>
<dd><p>argparse type to select from a set of edge types</p>
</dd></dl>

<p>For the standard types there is code to create HTML and Inkscape
extensions. The other types can have <code class="docutils literal notranslate"><span class="pre">.html()</span></code> and <code class="docutils literal notranslate"><span class="pre">.inx()</span></code>
methods.</p>
<p>The argument parser need to be built in the <code class="docutils literal notranslate"><span class="pre">.__init__()</span></code> method
after calling the method of the super class. Have a look at</p>
<dl class="method">
<dt id="boxes.generators._template.BOX.__init__">
<code class="descclassname">BOX.</code><code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/boxes/generators/_template.html#BOX.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#boxes.generators._template.BOX.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>As many arguments are used over and over there is a function that can
add the most common ones:</p>
<dl class="method">
<dt id="boxes.Boxes.buildArgParser">
<code class="descclassname">Boxes.</code><code class="descname">buildArgParser</code><span class="sig-paren">(</span><em>*l</em>, <em>**kw</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/boxes.html#Boxes.buildArgParser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#boxes.Boxes.buildArgParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Add commonly used arguments</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>*l</strong> – parameter names</li>
<li><strong>**kw</strong> – parameters with new default values</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Supported parameters are</p>
<ul class="simple">
<li>floats: x, y, h, hi</li>
<li>argparseSections: sx, sy</li>
<li>ArgparseEdgeType: bottom_edge, top_edge</li>
<li>boolarg: outside</li>
<li>str (selection): nema_mount</li>
</ul>
</dd></dl>

<p>Check the source for details about the single arguments.</p>
<p>Other arguments can be added with the normal argparser API - namely</p>
<dl class="method">
<dt id="argparse.ArgumentParser.add_argument">
<code class="descclassname">ArgumentParser.</code><code class="descname">add_argument</code><span class="sig-paren">(</span><em>dest</em>, <em>...</em>, <em>name=value</em>, <em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#argparse.ArgumentParser.add_argument" title="Permalink to this definition">¶</a></dt>
<dd><p>add_argument(option_string, option_string, …, name=value, …)</p>
</dd></dl>

<p>of the <code class="docutils literal notranslate"><span class="pre">Boxes.argparser</span></code> attribute.</p>
<div class="section" id="edge-style-arguments">
<h3>Edge style arguments<a class="headerlink" href="#edge-style-arguments" title="Permalink to this headline">¶</a></h3>
<p>Edges that work together share a Settings class (and object). These
classes can create <code class="docutils literal notranslate"><span class="pre">argparse</span></code> groups:</p>
<dl class="classmethod">
<dt id="boxes.edges.Settings.parserArguments">
<em class="property">classmethod </em><code class="descclassname">Settings.</code><code class="descname">parserArguments</code><span class="sig-paren">(</span><em>parser</em>, <em>prefix=None</em>, <em>**defaults</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/boxes/edges.html#Settings.parserArguments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#boxes.edges.Settings.parserArguments" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>See</p>
<dl class="method">
<dt>
<code class="descclassname">BOX.</code><code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/boxes/generators/_template.html#BOX.__init__"><span class="viewcode-link">[source]</span></a></dt>
<dd></dd></dl>

<p>for a list of possible edge settings. These regular settings are used
in the standard edge instances used everywhere. For special edge
instances you can call them with a <code class="docutils literal notranslate"><span class="pre">prefix</span></code> parameter. But you then
need to deal with the results on your own.</p>
</div>
<div class="section" id="default-arguments">
<h3>Default Arguments<a class="headerlink" href="#default-arguments" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="usermanual.html#default-args"><span class="std std-ref">Default arguments</span></a> get added automatically by the super class’s
constructor.</p>
</div>
<div class="section" id="accessing-the-arguments">
<h3>Accessing the Arguments<a class="headerlink" href="#accessing-the-arguments" title="Permalink to this headline">¶</a></h3>
<p>For convenience content of the arguments are written to attributes of
the Boxes instance before <code class="docutils literal notranslate"><span class="pre">.render()</span></code> is called. This is done by
<code class="docutils literal notranslate"><span class="pre">Boxes.parseArgs</span></code>. But most people won’t need to care as this is
handled by the frame work.  Be careful to <strong>not overwrite important
methods or attributes by using conflicting argument names</strong>.</p>
</div>
</div>
<div class="section" id="api-levels">
<h2>API Levels<a class="headerlink" href="#api-levels" title="Permalink to this headline">¶</a></h2>
<p>For actual drawing there are multiple levels of abscractions thta can
be used. From the simplest to the more powerful they are the following:</p>
<div class="section" id="simple-drawing-commands">
<h3>Simple drawing commands<a class="headerlink" href="#simple-drawing-commands" title="Permalink to this headline">¶</a></h3>
<p>These are simple drawing commands. Some of them get <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code> and
<code class="docutils literal notranslate"><span class="pre">angle</span></code> parameters to draw somewhere specific. Some just draw right
at the current coordinate origin. Often these commands create holes or
hole patterns.</p>
</div>
<div class="section" id="moving-the-coordinate-system">
<h3>Moving the coordinate system<a class="headerlink" href="#moving-the-coordinate-system" title="Permalink to this headline">¶</a></h3>
<p>Boxes.py moves the coordinate system around a lot. You basically never have to
deal with the global position on the sheet but only with coordnates
relative to where you are. There are a few functions to move the
origin to a convenient position.</p>
</div>
<div class="section" id="turtle-graphics">
<h3>Turtle graphics<a class="headerlink" href="#turtle-graphics" title="Permalink to this headline">¶</a></h3>
<p>To draw parts turtle graphic commands are used. The always start at
hthe current origin following the X axis. The move the origin with
them. The inside of the part is above the X axis and the outside
below. Corners with an positive angle (going counter clockwise) close
the part while negative angles (going clockwise) create protrusions.
This is inversed for holes which need to be drawn clockwise.</p>
<p>Getting this directions right is important to make the burn correction
(aka kerf) work properly. The burn correction is implemented by
increasing the radius of positive corners and decresing the radius of
negative corners. (TODO: nice pictures)</p>
</div>
<div class="section" id="edges">
<h3>Edges<a class="headerlink" href="#edges" title="Permalink to this headline">¶</a></h3>
<p>Edges are also turtle graphic commands. But they have been elevated to
proper Classes.</p>
</div>
<div class="section" id="parts">
<h3>Parts<a class="headerlink" href="#parts" title="Permalink to this headline">¶</a></h3>
<p>There are a couple of standard parts that can be drawn with a single
command. Their typical params are explained in the API docs.</p>
</div>
<div class="section" id="part-callbacks">
<h3>Part Callbacks<a class="headerlink" href="#part-callbacks" title="Permalink to this headline">¶</a></h3>
<p>Most parts support callbacks - either one in the middle for round
parts or one for each edge. They allow placing holes or other features
on the part.</p>
</div>
</div>
<div class="section" id="how-to-get-things-done">
<h2>How to get things done<a class="headerlink" href="#how-to-get-things-done" title="Permalink to this headline">¶</a></h2>
<p>Decide whether you want to start from scratch or want to rework an
existing generator.</p>
<p>You should go over the arguments first. Get at least the most basic
arguments done. For things you are still unsure you can just use a
attribute set in the .__init__() method and turn it into a proper
argument later on.</p>
<p>Depending on what you want to do you can work on the different levels
of the API. You can either use what is there and combine it into
something new or you can implements new things in the appropriate level.</p>
<p>Here are some examples:</p>
<div class="section" id="housing-for-some-electronics">
<h3>Housing for some electronics<a class="headerlink" href="#housing-for-some-electronics" title="Permalink to this headline">¶</a></h3>
<p>You can use the ElectronicsBox or the ClosedBox as a basis. Write some
callbacks to place holes in the walls to allow accessing the ports of
the electronics boards. Place some holes to screw spacers into the
bottom to mount the PBC on.</p>
</div>
<div class="section" id="nemamount">
<h3>NemaMount<a class="headerlink" href="#nemamount" title="Permalink to this headline">¶</a></h3>
<p>This is a good non box example to look at.</p>
<dl class="class">
<dt id="boxes.generators.nemamount.NemaMount">
<em class="property">class </em><code class="descclassname">boxes.generators.nemamount.</code><code class="descname">NemaMount</code><a class="reference internal" href="_modules/boxes/generators/nemamount.html#NemaMount"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#boxes.generators.nemamount.NemaMount" title="Permalink to this definition">¶</a></dt>
<dd><p>Mounting braket for a Nema motor</p>
</dd></dl>

<p>Note that although it produces a cube like object it uses separate
variables (<code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, <code class="docutils literal notranslate"><span class="pre">h</span></code>) for the different axis. Probably
because it started as a copy of another generator like <code class="docutils literal notranslate"><span class="pre">ClosedBox</span></code>.</p>
</div>
<div class="section" id="displayshelf">
<h3>DisplayShelf<a class="headerlink" href="#displayshelf" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="boxes.generators.displayshelf.DisplayShelf">
<em class="property">class </em><code class="descclassname">boxes.generators.displayshelf.</code><code class="descname">DisplayShelf</code><a class="reference internal" href="_modules/boxes/generators/displayshelf.html#DisplayShelf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#boxes.generators.displayshelf.DisplayShelf" title="Permalink to this definition">¶</a></dt>
<dd><p>Shelf with forward slanted floors</p>
</dd></dl>

<p>The DisplayShelf is completely made out of rectangularWalls(). It uses
a callback to place all the fingerHolesAt() right places on the sides.
While the use of the Boxes.py API is pretty straight forward the
calculations needed are a bit more tricky. You can use the <code class="docutils literal notranslate"><span class="pre">debug</span></code>
default param to check if you got things right when attempting
something like this yourself.</p>
<p>Note that the front walls and the shelfs form a 90° angle so they work
with the default FingerJoints.</p>
</div>
<div class="section" id="bintray">
<h3>BinTray<a class="headerlink" href="#bintray" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="boxes.generators.bintray.BinTray">
<em class="property">class </em><code class="descclassname">boxes.generators.bintray.</code><code class="descname">BinTray</code><a class="reference internal" href="_modules/boxes/generators/bintray.html#BinTray"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#boxes.generators.bintray.BinTray" title="Permalink to this definition">¶</a></dt>
<dd><p>A Type tray variant to be used up right with sloped walls in front</p>
</dd></dl>

<p>The BinTray is based on the TypeTray generator:</p>
<dl class="class">
<dt id="boxes.generators.typetray.TypeTray">
<em class="property">class </em><code class="descclassname">boxes.generators.typetray.</code><code class="descname">TypeTray</code><a class="reference internal" href="_modules/boxes/generators/typetray.html#TypeTray"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#boxes.generators.typetray.TypeTray" title="Permalink to this definition">¶</a></dt>
<dd><p>Type tray - allows only continuous walls</p>
</dd></dl>

<p>TypeTray is an already pretty complicated generator.</p>
<p>BinTray replaces the now vertical front (former top) edges with a
special purpose one that does add the triangles:</p>
<dl class="class">
<dt id="boxes.generators.bintray.BinFrontEdge">
<em class="property">class </em><code class="descclassname">boxes.generators.bintray.</code><code class="descname">BinFrontEdge</code><span class="sig-paren">(</span><em>boxes</em>, <em>settings</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/boxes/generators/bintray.html#BinFrontEdge"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#boxes.generators.bintray.BinFrontEdge" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>The <code class="docutils literal notranslate"><span class="pre">hi</span></code> (height of inner walls) argument was removed although the
variable is still used internally - out of lazyness.</p>
<p>To complete the bin the front walls are added. Follow up patches then
switched the slots between the vertical and horizontal walls to have
better support for the now bottoms of the bins. Another patch adds
angled finger joints for connecting the front walls with the bottoms
of the bins.</p>
<p>The TrafficLight generator uses a similar technique implementing its
own Edge class. But it uses its own code to generate all the wall needed.</p>
</div>
<div class="section" id="stachel">
<h3>Stachel<a class="headerlink" href="#stachel" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="boxes.generators.stachel.Stachel">
<em class="property">class </em><code class="descclassname">boxes.generators.stachel.</code><code class="descname">Stachel</code><a class="reference internal" href="_modules/boxes/generators/stachel.html#Stachel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#boxes.generators.stachel.Stachel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bass Recorder Endpin</p>
</dd></dl>

<p>Stachel allows mounting a monopod to a bass recorder. It is basically
just one part repeated with different parameters. It can’t really make
use of much of the Boxes.py library. It implements this one part
including the <code class="docutils literal notranslate"><span class="pre">move</span></code> parameter and draws everything using the
<code class="docutils literal notranslate"><span class="pre">.polyline()</span></code> method. This is pretty painful as lots of angles and
distances need to be calculated by hand.</p>
<p>For symmetric sections it passes the parameters to <code class="docutils literal notranslate"><span class="pre">.polyline</span></code> twice
– first in normal order and then reversed to get the mirrored section.</p>
<p>This generator is beyond what Boxes.py is designed for. If you need
something similar you may want to use another tool like OpenScad or a
traditional CAD program.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Using the Boxes.py library</a><ul>
<li><a class="reference internal" href="#generator-arguments">Generator Arguments</a><ul>
<li><a class="reference internal" href="#edge-style-arguments">Edge style arguments</a></li>
<li><a class="reference internal" href="#default-arguments">Default Arguments</a></li>
<li><a class="reference internal" href="#accessing-the-arguments">Accessing the Arguments</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api-levels">API Levels</a><ul>
<li><a class="reference internal" href="#simple-drawing-commands">Simple drawing commands</a></li>
<li><a class="reference internal" href="#moving-the-coordinate-system">Moving the coordinate system</a></li>
<li><a class="reference internal" href="#turtle-graphics">Turtle graphics</a></li>
<li><a class="reference internal" href="#edges">Edges</a></li>
<li><a class="reference internal" href="#parts">Parts</a></li>
<li><a class="reference internal" href="#part-callbacks">Part Callbacks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-get-things-done">How to get things done</a><ul>
<li><a class="reference internal" href="#housing-for-some-electronics">Housing for some electronics</a></li>
<li><a class="reference internal" href="#nemamount">NemaMount</a></li>
<li><a class="reference internal" href="#displayshelf">DisplayShelf</a></li>
<li><a class="reference internal" href="#bintray">BinTray</a></li>
<li><a class="reference internal" href="#stachel">Stachel</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="CONTRIBUTING.html"
                        title="previous chapter">Contributing to Boxes.py</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Boxes.html"
                        title="next chapter">The boxes.Boxes main class</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/apiintro.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Boxes.html" title="The boxes.Boxes main class"
             >next</a> |</li>
        <li class="right" >
          <a href="CONTRIBUTING.html" title="Contributing to Boxes.py"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">boxes.py 0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Florian Festi.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1.
    </div>
  </body>
</html>